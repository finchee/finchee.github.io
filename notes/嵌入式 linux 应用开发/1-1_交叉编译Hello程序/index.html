
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="finchee" name="author"/>
<link href="http://blog.finchee.site/notes/%E5%B5%8C%E5%85%A5%E5%BC%8F%20linux%20%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1-1_%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91Hello%E7%A8%8B%E5%BA%8F/" rel="canonical"/>
<link href="../../CDPNP/01_CDCAM%20%E6%8E%A2%E7%A9%B6/" rel="prev"/>
<link href="../2-1_GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.0, mkdocs-material-9.5.24" name="generator"/>
<title>交叉编译Hello程序 - finchee's site</title>
<link href="../../../assets/stylesheets/main.6543a935.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#hello">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="finchee's site" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="finchee's site">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            finchee's site
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              交叉编译Hello程序
            
          </span>
</div>
</div>
</div>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
          
  
    
  
  主页

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../mkdocs/">
          
  
    
  
  学习笔记

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="finchee's site" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="finchee's site">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    finchee's site
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    主页
  </span>
</a>
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            主页
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../about_me/">
<span class="md-ellipsis">
    关于
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
<span class="md-ellipsis">
    学习笔记
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            学习笔记
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../mkdocs/">
<span class="md-ellipsis">
    mkdocs
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_1">
<span class="md-nav__icon md-icon"></span>
            mkdocs
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../CDPNP/">
<span class="md-ellipsis">
    CDPNP
  </span>
</a>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            CDPNP
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../CDPNP/01_CDCAM%20%E6%8E%A2%E7%A9%B6/">
<span class="md-ellipsis">
    CDCAM 探究
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
<span class="md-ellipsis">
    嵌入式 linux 应用开发
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            嵌入式 linux 应用开发
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    交叉编译Hello程序
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    交叉编译Hello程序
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
<span class="md-ellipsis">
      开发环境
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hello_1">
<span class="md-ellipsis">
      Hello 程序解析
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#gcc-hello">
<span class="md-ellipsis">
      服务器执行 gcc 编译的 hello
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arm-gcc-hello">
<span class="md-ellipsis">
      ARM 开发板上执行 gcc 编译的 hello
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arm-hello">
<span class="md-ellipsis">
      ARM 开发板上执行交叉编译工具链编译的 hello
    </span>
</a>
<nav aria-label="ARM 开发板上执行交叉编译工具链编译的 hello" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#arm">
<span class="md-ellipsis">
      安装 ARM 交叉编译工具链
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arm-hello_1">
<span class="md-ellipsis">
      ARM 交叉编译工具链编译执行 hello
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hello_2">
<span class="md-ellipsis">
      hello 程序的引申
    </span>
</a>
<nav aria-label="hello 程序的引申" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#hc">
<span class="md-ellipsis">
      .h/.c 文件的差别
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
<span class="md-ellipsis">
      系统层次
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../2-1_GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/">
<span class="md-ellipsis">
    GCC编译过程
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../2-2_GCC%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9/">
<span class="md-ellipsis">
    GCC常用选项
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3_4" id="__nav_2_3_4_label" tabindex="0">
<span class="md-ellipsis">
    tspi linux 开发
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_3_4">
<span class="md-nav__icon md-icon"></span>
            tspi linux 开发
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../tspi_linux/%E7%BC%96%E8%AF%91%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/">
<span class="md-ellipsis">
    编译问题记录
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
<span class="md-ellipsis">
      开发环境
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hello_1">
<span class="md-ellipsis">
      Hello 程序解析
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#gcc-hello">
<span class="md-ellipsis">
      服务器执行 gcc 编译的 hello
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arm-gcc-hello">
<span class="md-ellipsis">
      ARM 开发板上执行 gcc 编译的 hello
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arm-hello">
<span class="md-ellipsis">
      ARM 开发板上执行交叉编译工具链编译的 hello
    </span>
</a>
<nav aria-label="ARM 开发板上执行交叉编译工具链编译的 hello" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#arm">
<span class="md-ellipsis">
      安装 ARM 交叉编译工具链
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arm-hello_1">
<span class="md-ellipsis">
      ARM 交叉编译工具链编译执行 hello
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hello_2">
<span class="md-ellipsis">
      hello 程序的引申
    </span>
</a>
<nav aria-label="hello 程序的引申" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#hc">
<span class="md-ellipsis">
      .h/.c 文件的差别
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
<span class="md-ellipsis">
      系统层次
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="hello">交叉编译Hello程序</h1>
<hr/>
<h2 id="_1">开发环境</h2>
<div class="mermaid">flowchart LR
    A(Win PC) &lt;--&gt;|vscode remote| B(linux-server)
    A &lt;--&gt;|SSH| C(ARM 开发板)
</div>
<p>服务器(linux-server):</p>
<pre><code class="language-sehll">    finchee@linux-server:~/Documents/hello$ uname -a
    Linux linux-server 6.5.0-35-generic #35~22.04.1-Ubuntu SMP PREEMPT_DYNAMIC Tue May  7 09:00:52 UTC 2 x86_64 x86_64 x86_64 GNU/Linux
</code></pre>
<p>ARM 开发板: <a href="https://lckfb.com/project/detail/lctspi-2g-16g?param=baseInfo">tspi-raspios</a></p>
<h2 id="hello_1">Hello 程序解析</h2>
<pre><code class="language-C">    #include &lt;stdio.h&gt;

    // argc: argument count argv: argument value
    int main(int argc, char **argv)
    {
    if(argc &gt;= 2)
        printf("Hello, %s!\n", argv[1]);
    else
        printf("Hello, world\n");
    return 0;
    }
</code></pre>
<p>如果提供了至少一个命令行参数（不包括程序名），它将打印出"Hello, [参数]!"。<br/>
如果没有提供命令行参数，它将打印出"Hello, world!"。</p>
<p>argv[0] 指向 hello<br/>
argv[1] 指向第二个参数  </p>
<h2 id="gcc-hello">服务器执行 gcc 编译的 hello</h2>
<pre><code class="language-shell">    finchee@linux-server:~/Documents/hello$ gcc -o hello hello.c
    finchee@linux-server:~/Documents/hello$ ./hello finchee
    Hello, finchee!
    finchee@linux-server:~/Documents/hello$ ./hello finchee how are you?
    Hello, finchee!
    finchee@linux-server:~/Documents/hello$ ./hello "finchee how are you?"
    Hello, finchee how are you?!
    finchee@linux-server:~/Documents/hello$ 
</code></pre>
<h2 id="arm-gcc-hello">ARM 开发板上执行 gcc 编译的 hello</h2>
<pre><code class="language-shell">    finchee@raspberrypi:~/Documents/hello $ sudo ./hello
    sudo: ./hello: command not found
    finchee@raspberrypi:~/Documents/hello $ file hello
    hello: ELF 64-bit LSB pie executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=e2ced6fb612db420eab030c1e3d26f34c30d1843, for GNU/Linux 3.2.0, not stripped
</code></pre>
<h2 id="arm-hello">ARM 开发板上执行交叉编译工具链编译的 hello</h2>
<h3 id="arm">安装 ARM 交叉编译工具链</h3>
<p>服务器中安装 ARM 交叉编译工具链:</p>
<pre><code class="language-shell">    finchee@linux-server:/usr/bin$ sudo apt-get install gcc-arm-linux-gnueabihf
</code></pre>
<p>确认是否安装成功</p>
<pre><code class="language-shell">    finchee@linux-server:/usr/bin$ arm-linux-gnueabihf-gcc -v
    Using built-in specs.
    COLLECT_GCC=arm-linux-gnueabihf-gcc
    COLLECT_LTO_WRAPPER=/usr/lib/gcc-cross/arm-linux-gnueabihf/11/lto-wrapper
    Target: arm-linux-gnueabihf
    Configured with: ../src/configure -v --with-pkgversion='Ubuntu 11.4.0-1ubuntu1~22.04' --with-bugurl=file:///usr/share/doc/gcc-11/README.Bugs --enable-languages=c,ada,c++,go,d,fortran,objc,obj-c++,m2 --prefix=/usr --with-gcc-major-version-only --program-suffix=-11 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-libitm --disable-libquadmath --disable-libquadmath-support --enable-plugin --enable-default-pie --with-system-zlib --enable-libphobos-checking=release --without-target-system-zlib --enable-multiarch --disable-sjlj-exceptions --with-arch=armv7-a+fp --with-float=hard --with-mode=thumb --disable-werror --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=arm-linux-gnueabihf --program-prefix=arm-linux-gnueabihf- --includedir=/usr/arm-linux-gnueabihf/include --with-build-config=bootstrap-lto-lean --enable-link-serialization=2
    Thread model: posix
    Supported LTO compression algorithms: zlib zstd
    gcc version 11.4.0 (Ubuntu 11.4.0-1ubuntu1~22.04) 
</code></pre>
<h3 id="arm-hello_1">ARM 交叉编译工具链编译执行 hello</h3>
<pre><code class="language-shell">    finchee@linux-server:~/Documents/hello$ arm-linux-gnueabihf-gcc -o hello hello.c
</code></pre>
<p>ARM 开发板执行 ./hello 碰到如下问题:</p>
<pre><code class="language-shell">    finchee@raspberrypi:~/Documents/hello $ sudo ./hello
    sudo: ./hello: command not found
    finchee@raspberrypi:~/Documents/hello $ ./hello
    -bash: ./hello: Permission denied
    finchee@raspberrypi:~/Documents/hello $ file hello
    hello: ELF 32-bit LSB pie executable, ARM, EABI5 version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux-armhf.so.3, BuildID[sha1]=b1771a5aa9c09f0b31345c161ad5ff6fa4909399, for GNU/Linux 3.2.0, not stripped
</code></pre>
<p>根据 <a href="https://blog.csdn.net/li_Xing666/article/details/81487840">ARM上运行可执行程序出现No such file or directory的问题</a> 中的方法, 服务器编译时增加 <code>-static</code> 参数</p>
<pre><code class="language-shell">    finchee@linux-server:~/Documents/hello$ arm-linux-gnueabihf-gcc -o hello hello.c -static
</code></pre>
<p>拷贝到 ARM 开发板执行结果如下</p>
<pre><code class="language-shell">    finchee@raspberrypi:~/Documents/hello $ ./hello finchee
    Hello, finchee!
    finchee@raspberrypi:~/Documents/hello $ file ./hello
    ./hello: ELF 32-bit LSB executable, ARM, EABI5 version 1 (GNU/Linux), statically linked, BuildID[sha1]=a5b138ce6e9a9bcd4a2014062121e7a1e4a9f505, for GNU/Linux 3.2.0, not stripped
</code></pre>
<p>两次编译后的区别如下</p>
<pre><code class="language-shell">    EABI5 version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux-armhf.so.3, 
    EABI5 version 1 (GNU/Linux), statically linked, 
</code></pre>
<p>关于使用静态链接的方式进行编译, 这一部分待探究补充.</p>
<h2 id="hello_2">hello 程序的引申</h2>
<h3 id="hc">.h/.c 文件的差别</h3>
<table>
<thead>
<tr>
<th>文件</th>
<th>功能</th>
<th>位置</th>
</tr>
</thead>
<tbody>
<tr>
<td>.h</td>
<td>声明函数/declare<br/>(举例:int add(int a, int b);<br/> 编译器根据声明检查<br/>函数的使用是否正确)</td>
<td>1. 系统目录(工具链的目录)<br/>2. 用户指定目录(-I dir)</td>
</tr>
<tr>
<td>.c</td>
<td>实现/define(implement)</td>
<td>1. 系统目录<br/>2. 用户指定目录</td>
</tr>
</tbody>
</table>
<p>可以根据以上引申解决以下问题</p>
<ol>
<li>头文件找不到</li>
<li>函数未定义</li>
</ol>
<h3 id="_2">系统层次</h3>
<table>
<thead>
<tr>
<th>系统层次</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>usr</td>
<td>APP</td>
<td></td>
</tr>
<tr>
<td>usr</td>
<td>libc</td>
<td>&lt;--printf/open/read</td>
</tr>
<tr>
<td>kernel</td>
<td>FS/Driver</td>
<td>&lt;--open/read</td>
</tr>
<tr>
<td>底层硬件</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.081f42fc.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>