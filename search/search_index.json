{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u4e3b\u9875","text":"<p>\u4f60\u597d\uff0c\u6b22\u8fce\u6765\u5230\u6211\u7684\u5c0f\u7ad9\uff01</p> <p>\u8fd9\u662f\u6211\u7684\u9ed8\u8ba4\u9875\uff0c\u4f60\u53ef\u4ee5\u4ece\u8fd9\u91cc\u5f00\u59cb\u3002</p> <p>\u7f51\u9875\u5bfc\u822a\ud83d\udc47</p> <p>\u670d\u52a1\u5668</p> <p>\u56fe\u4e66\u9986</p> <p>\u591a\u5a92\u4f53</p> <p>\u5bb6\u5ead\u52a9\u7406</p>"},{"location":"about_me/","title":"\u5173\u4e8e","text":"<p>\u6b22\u8fce\u6765\u5230\u6211\u7684\u5c0f\u7ad9\u5440\uff0c\u5f88\u9ad8\u5174\u9047\u89c1\u4f60\uff01\ud83e\udd1d</p>"},{"location":"about_me/#_2","title":"\ud83c\udfe0 \u5173\u4e8e\u672c\u7ad9","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u7528\u4e8e\u8bb0\u5f55\u7684\u7f51\u7ad9.</p>"},{"location":"about_me/#_3","title":"\ud83d\udc68\u200d\ud83d\udcbb \u535a\u4e3b\u662f\u8c01","text":"<p>\u4e00\u4f4d\u5728\u7535\u5b50\u4ea7\u4e1a\u8def\u4e0a\u7684 engineer.</p>"},{"location":"about_me/#_4","title":"\u26f9 \u5174\u8da3\u7231\u597d","text":"<p>\u9732\u8425/\u81ea\u884c\u8f66/\u963f\u732b/\u963f\u72d7/\u667a\u80fd\u5bb6\u5c45</p>"},{"location":"about_me/#_5","title":"\ud83d\udcec \u8054\u7cfb\u6211\u5440","text":"<p>\u8bf7\u5728\u8bc4\u8bba\u4e2d\u8054\u7cfb\u6211!</p>"},{"location":"comments/","title":"\u6b22\u8fce\u5728\u8fd9\u91cc\u5199\u4e0b\u4f60\u7684\u7559\u8a00","text":""},{"location":"notes/CDPNP/","title":"CDPNP","text":"<p>\u9879\u76ee\u5730\u5740: CDPNP</p> <p></p>"},{"location":"notes/CDPNP/01_CDCAM_%E6%8E%A2%E7%A9%B6/","title":"CDCAM \u63a2\u7a76","text":"<p>\u9879\u76ee\u5730\u5740: cdcam</p>"},{"location":"notes/CDPNP/01_CDCAM_%E6%8E%A2%E7%A9%B6/#hardware","title":"Hardware","text":"<p>\u539f\u7406\u56fe:cdcam_sch_v1.4.pdf</p> <pre><code>flowchart LR\n   subgraph \u52a8\u6001\u5e93\n    direction LR\n     A(STM32G071) --&gt;|DVP| B(OV2640)\n     C(CDCTL_B1) --&gt;|CD_SPI| A\n     D(BUS_interface_1) --&gt;|RS485| C\n     E(BUS_interface_2) --&gt;|RS485| C\n     A --&gt;|SEN_SPI| F(\"SRAM(optional)\")\n   end\n</code></pre>"},{"location":"notes/CDPNP/01_CDCAM_%E6%8E%A2%E7%A9%B6/#firmware","title":"Firmware","text":""},{"location":"notes/CDPNP/01_CDCAM_%E6%8E%A2%E7%A9%B6/#app_main","title":"app_main","text":""},{"location":"notes/CDPNP/01_CDCAM_%E6%8E%A2%E7%A9%B6/#load_conf","title":"load_conf()","text":"<p>\u8fd9\u6bb5\u4ee3\u7801\u901a\u8fc7Kimi.ai\u7684\u7406\u89e3\u5982\u4e0b:</p> <p>\u7ed3\u5408\u60a8\u63d0\u4f9b\u7684\u4e24\u4e2a\u4ee3\u7801\u6bb5\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u5168\u9762\u5730\u7406\u89e3<code>load_conf</code>\u51fd\u6570\u7684\u4f5c\u7528\u548c\u4e0a\u4e0b\u6587\u3002\u9996\u5148\uff0c<code>csa_dft</code>\u662f\u4e00\u4e2a<code>const csa_t</code>\u7c7b\u578b\u7684\u5e38\u91cf\u7ed3\u6784\u4f53\u5b9e\u4f8b\uff0c\u5b83\u5b9a&gt;\u4e49\u4e86\u4e00\u7ec4\u9ed8\u8ba4\u7684\u914d\u7f6e\u503c\uff0c\u8fd9\u4e9b\u503c\u5c06\u88ab\u7528\u4e8e\u521d\u59cb\u5316\u6216\u9a8c\u8bc1\u52a0\u8f7d\u7684\u914d\u7f6e\u6570\u636e\u3002</p> <p>\u4ee5\u4e0b\u662f<code>load_conf</code>\u51fd\u6570\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <ol> <li><code>uint16_t magic_code = *(uint16_t *)APP_CONF_ADDR;</code>&gt;    \u4ece<code>APP_CONF_ADDR</code>\u5730\u5740\u8bfb\u53d616\u4f4d\u7684\u503c\u5230<code>magic_code</code>\u53d8\u91cf\uff0c\u7528\u4e8e\u68c0\u67e5\u914d\u7f6e\u6570\u636e\u7684\u9b54\u6cd5\u6570\u5b57\u3002</li> <li><code>uint16_t conf_ver = *(uint16_t *)(APP_CONF_ADDR + 2);</code>&gt;    \u4ece<code>APP_CONF_ADDR</code>\u5730\u5740\u52a0\u4e0a2\u7684\u4f4d\u7f6e\u8bfb\u53d616\u4f4d\u7684\u503c\u5230<code>conf_ver</code>\u53d8\u91cf\uff0c\u7528\u4e8e\u83b7\u53d6\u914d\u7f6e\u6570\u636e\u7684\u7248\u672c\u53f7\u3002</li> <li><code>csa = csa_dft;</code>    \u5c06<code>csa_dft</code>\u7684\u9ed8\u8ba4\u914d\u7f6e\u503c\u590d\u5236\u7ed9<code>csa</code>\u53d8\u91cf\u3002\u8fd9\u662f\u5728\u52a0\u8f7d\u5916\u90e8\u914d\u7f6e\u4e4b\u524d\uff0c\u5148\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u4f5c\u4e3a\u57fa\u7840\u3002</li> <li><code>if (magic_code == 0xcdcd &amp;&amp; conf_ver == APP_CONF_VER) { ... }</code>    \u5982\u679c\u8bfb\u53d6\u7684\u9b54\u6cd5\u6570\u5b57\u548c\u7248\u672c\u53f7\u4e0e\u9884\u671f\u7684\u9ed8\u8ba4\u503c\u5339\u914d\uff0c\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a<ul> <li>\u4f7f\u7528<code>memcpy</code>\u51fd\u6570\u5c06\u4ece<code>APP_CONF_ADDR</code>\u5730\u5740\u5f00\u59cb\u7684\u6570\u636e\u590d\u5236\u5230<code>csa</code>\u7ed3\u6784\u4f53\u4e2d\uff0c\u76f4\u5230<code>_end_save</code>\u6210\u5458\u4e4b\u524d\u7684\u4f4d\u7f6e\u3002<code>_end_save</code>\u662f<code>csa_t</code>\u7ed3\u6784\u4f53\u4e2d\u5b9a\u4e49\u7684\u4e00\u4e2a\u7279\u6b8a\u6210\u5458\uff0c\u7528\u4e8e\u6807\u8bc6\u9700\u8981\u4fdd\u5b58\u7684\u914d\u7f6e\u6570\u636e\u7684\u7ed3\u675f\u4f4d\u7f6e\u3002</li> <li>\u5c06<code>csa</code>\u7ed3\u6784\u4f53\u4e2d\u7684<code>conf_from</code>\u6210\u5458\u8bbe\u7f6e\u4e3a1\uff0c\u8868\u793a\u914d\u7f6e\u662f\u4ece\u6709\u6548\u7684\u5916\u90e8\u6765\u6e90\u52a0\u8f7d\u7684\u3002</li> </ul> </li> <li><code>else if (magic_code == 0xcdcd &amp;&amp; (conf_ver &gt;&gt; 8) == (APP_CONF_VER &gt;&gt; 8)) { ... }</code>    \u5982\u679c\u8bfb\u53d6\u7684\u9b54\u6cd5\u6570\u5b57\u6b63\u786e\uff0c\u4f46\u7248\u672c\u53f7\u53ea\u6709\u9ad88\u4f4d\u4e0e\u9884\u671f\u7684\u9ed8\u8ba4\u503c\u5339\u914d\uff08\u53ef\u80fd\u8868\u793a\u8f7b\u5fae\u7684\u7248\u672c\u5dee\u5f02\uff09\uff0c\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a<ul> <li>\u4f7f\u7528<code>memcpy</code>\u51fd\u6570\u5c06\u4ece<code>APP_CONF_ADDR</code>\u5730\u5740\u5f00\u59cb\u7684\u6570\u636e\u590d\u5236\u5230<code>csa</code>\u7ed3\u6784\u4f53\u4e2d\uff0c\u76f4\u5230<code>_end_common</code>\u6210\u5458\u4e4b\u524d\u7684\u4f4d\u7f6e\u3002<code>_end_common</code>\u662f<code>csa_t</code>\u7ed3\u6784\u4f53\u4e2d\u5b9a\u4e49\u7684\u53e6\u4e00\u4e2a\u7279\u6b8a\u6210\u5458\uff0c\u7528\u4e8e\u6807\u8bc6\u901a\u7528\u914d\u7f6e\u6570\u636e\u7684\u7ed3\u675f\u4f4d\u7f6e\u3002</li> <li>\u5c06<code>csa</code>\u7ed3\u6784\u4f53\u4e2d\u7684<code>conf_from</code>\u6210\u5458\u8bbe\u7f6e\u4e3a2\uff0c\u8868\u793a\u914d\u7f6e\u662f\u4ece\u5916\u90e8\u6765\u6e90\u52a0\u8f7d\u7684\uff0c\u4f46\u53ef\u80fd\u5b58\u5728\u7248\u672c\u5dee\u5f02\u3002</li> <li>\u66f4\u65b0<code>csa</code>\u7ed3\u6784\u4f53\u4e2d\u7684<code>conf_ver</code>\u6210\u5458\u4e3a<code>APP_CONF_VER</code>\uff0c\u786e\u4fdd\u7248\u672c\u53f7\u662f\u6700\u65b0\u7684\u3002</li> </ul> </li> <li><code>if (csa.conf_from) ...</code>    \u5982\u679c<code>csa</code>\u7ed3\u6784\u4f53\u7684<code>conf_from</code>\u6210\u5458\u4e0d\u4e3a0\uff08\u5373\u914d\u7f6e\u5df2\u7ecf\u4ece\u5916\u90e8\u52a0\u8f7d\uff09\uff0c\u5219\u5c06<code>csa</code>\u7ed3\u6784\u4f53\u4e2d\u7684<code>do_reboot</code>\u6210\u5458\u53ca\u5176\u540e\u4e24\u4e2a\u5b57\u8282\u6e05\u96f6\u3002\u8fd9\u53ef\u80fd\u662f\u7528\u4e8e\u91cd\u7f6e\u6216\u7981\u7528\u81ea\u52a8\u91cd\u542f\u7684\u6807\u5fd7\u3002</li> </ol> <p>\u6574\u4f53\u6765\u770b\uff0c<code>load_conf</code>\u51fd\u6570\u7684\u4f5c\u7528\u662f\u5c1d\u8bd5\u4ece<code>APP_CONF_ADDR</code>\u5730\u5740\u52a0\u8f7d\u914d\u7f6e\u6570\u636e\u5230<code>csa</code>\u7ed3\u6784\u4f53\u3002\u5982\u679c\u52a0\u8f7d\u6210\u529f\u6216\u90e8\u5206\u6210\u529f\uff0c\u5b83\u4f1a\u66f4\u65b0<code>csa</code>\u7ed3\u6784\u4f53\u7684\u76f8\u5e94\u6210\u5458\uff0c\u5e76\u6839\u636e\u914d\u7f6e\u7684\u6765\u6e90\u8bbe\u7f6e<code>conf_from</code>\u6807\u5fd7\u3002\u5982\u679c\u914d\u7f6e\u52a0\u8f7d\u5b58\u5728\u95ee\u9898\uff0c\u5b83\u5c06\u56de\u9000\u5230\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e<code>csa_dft</code>\u3002</p> <p>\u5173\u4e8e<code>APP_CONF_ADDR</code>\u5730\u5740, \u5b9e\u9645\u662fMCU\u5185\u90e8flash\u7684\u4e00\u4e2a\u5730\u5740: </p>"},{"location":"notes/mkdocs/","title":"\u4f7f\u7528\u6307\u5357","text":""},{"location":"notes/mkdocs/#markdown-github-pages","title":"markdown \u7f16\u8bd1\u90e8\u7f72\u5230 github pages","text":"<p>MkDocs\uff08Windows \u4e0a\u5b89\u88c5\u5e76\u4f7f\u7528\uff09</p>"},{"location":"notes/mkdocs/#gh-deploy-github","title":"gh-deploy \u547d\u4ee4\u63a8\u9001\u5230 github \u81ea\u5b9a\u4e49\u57df\u540d\u5931\u6548\u7684\u89e3\u51b3\u529e\u6cd5","text":"<p>\u90e8\u7f72\u6587\u6863</p>"},{"location":"notes/mkdocs/#mkdocs","title":"mkdocs \u652f\u6301\u65e0\u5e8f\u5217\u8868\u5d4c\u5957\u7684\u65b9\u6cd5","text":"<p>\u5b89\u88c5 mdx_truly_sane_lists</p> <pre><code>pip install mdx_truly_sane_lists\n</code></pre> <p>\u5728 mkdoc.yml \u4e2d\u6dfb\u52a0</p> <pre><code>markdown_extensions:\n    - mdx_truly_sane_lists\n</code></pre>"},{"location":"notes/mkdocs/#mkdocs-mermaid","title":"mkdocs \u652f\u6301 mermaid \u56fe\u8868\u529f\u80fd","text":"<p>\u53c2\u8003 Markdown \u7684\u9879\u76ee\u6587\u6863 <code>\u63d2\u4ef6</code>\u4e2d\u7684<code>\u56fe\u50cf\uff0c\u8868\u683c\uff0c\u56fe\u8868\u548c\u56fe\u5f62</code></p> <p>\u5b89\u88c5 mkdocs-mermaid2-plugin</p> <pre><code>pip install mkdocs-mermaid2-plugin\n</code></pre> <p>\u5728 mkdoc.yml \u4e2d\u6dfb\u52a0</p> <pre><code>plugins:\n    - search\n    - mermaid2\n</code></pre>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1-1_%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91Hello%E7%A8%8B%E5%BA%8F/","title":"\u4ea4\u53c9\u7f16\u8bd1Hello\u7a0b\u5e8f","text":""},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1-1_%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91Hello%E7%A8%8B%E5%BA%8F/#_1","title":"\u5f00\u53d1\u73af\u5883","text":"<pre><code>flowchart LR\n    A(Win PC) &lt;--&gt;|vscode remote| B(linux-server)\n    A &lt;--&gt;|SSH| C(ARM \u5f00\u53d1\u677f)\n</code></pre> <p>\u670d\u52a1\u5668(linux-server):</p> <pre><code>    finchee@linux-server:~/Documents/hello$ uname -a\n    Linux linux-server 6.5.0-35-generic #35~22.04.1-Ubuntu SMP PREEMPT_DYNAMIC Tue May  7 09:00:52 UTC 2 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre> <p>ARM \u5f00\u53d1\u677f: tspi-raspios</p>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1-1_%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91Hello%E7%A8%8B%E5%BA%8F/#hello_1","title":"Hello \u7a0b\u5e8f\u89e3\u6790","text":"<pre><code>    #include &lt;stdio.h&gt;\n\n    // argc: argument count argv: argument value\n    int main(int argc, char **argv)\n    {\n    if(argc &gt;= 2)\n        printf(\"Hello, %s!\\n\", argv[1]);\n    else\n        printf(\"Hello, world\\n\");\n    return 0;\n    }\n</code></pre> <p>\u5982\u679c\u63d0\u4f9b\u4e86\u81f3\u5c11\u4e00\u4e2a\u547d\u4ee4\u884c\u53c2\u6570\uff08\u4e0d\u5305\u62ec\u7a0b\u5e8f\u540d\uff09\uff0c\u5b83\u5c06\u6253\u5370\u51fa\"Hello, [\u53c2\u6570]!\"\u3002 \u5982\u679c\u6ca1\u6709\u63d0\u4f9b\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u5b83\u5c06\u6253\u5370\u51fa\"Hello, world!\"\u3002</p> <p>argv[0] \u6307\u5411 hello argv[1] \u6307\u5411\u7b2c\u4e8c\u4e2a\u53c2\u6570  </p>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1-1_%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91Hello%E7%A8%8B%E5%BA%8F/#gcc-hello","title":"\u670d\u52a1\u5668\u6267\u884c gcc \u7f16\u8bd1\u7684 hello","text":"<pre><code>    finchee@linux-server:~/Documents/hello$ gcc -o hello hello.c\n    finchee@linux-server:~/Documents/hello$ ./hello finchee\n    Hello, finchee!\n    finchee@linux-server:~/Documents/hello$ ./hello finchee how are you?\n    Hello, finchee!\n    finchee@linux-server:~/Documents/hello$ ./hello \"finchee how are you?\"\n    Hello, finchee how are you?!\n    finchee@linux-server:~/Documents/hello$ \n</code></pre>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1-1_%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91Hello%E7%A8%8B%E5%BA%8F/#arm-gcc-hello","title":"ARM \u5f00\u53d1\u677f\u4e0a\u6267\u884c gcc \u7f16\u8bd1\u7684 hello","text":"<pre><code>    finchee@raspberrypi:~/Documents/hello $ sudo ./hello\n    sudo: ./hello: command not found\n    finchee@raspberrypi:~/Documents/hello $ file hello\n    hello: ELF 64-bit LSB pie executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=e2ced6fb612db420eab030c1e3d26f34c30d1843, for GNU/Linux 3.2.0, not stripped\n</code></pre>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1-1_%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91Hello%E7%A8%8B%E5%BA%8F/#arm-hello","title":"ARM \u5f00\u53d1\u677f\u4e0a\u6267\u884c\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u7f16\u8bd1\u7684 hello","text":""},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1-1_%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91Hello%E7%A8%8B%E5%BA%8F/#arm","title":"\u5b89\u88c5 ARM \u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe","text":"<p>\u670d\u52a1\u5668\u4e2d\u5b89\u88c5 ARM \u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe:</p> <pre><code>    finchee@linux-server:/usr/bin$ sudo apt-get install gcc-arm-linux-gnueabihf\n</code></pre> <p>\u786e\u8ba4\u662f\u5426\u5b89\u88c5\u6210\u529f</p> <pre><code>    finchee@linux-server:/usr/bin$ arm-linux-gnueabihf-gcc -v\n    Using built-in specs.\n    COLLECT_GCC=arm-linux-gnueabihf-gcc\n    COLLECT_LTO_WRAPPER=/usr/lib/gcc-cross/arm-linux-gnueabihf/11/lto-wrapper\n    Target: arm-linux-gnueabihf\n    Configured with: ../src/configure -v --with-pkgversion='Ubuntu 11.4.0-1ubuntu1~22.04' --with-bugurl=file:///usr/share/doc/gcc-11/README.Bugs --enable-languages=c,ada,c++,go,d,fortran,objc,obj-c++,m2 --prefix=/usr --with-gcc-major-version-only --program-suffix=-11 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-libitm --disable-libquadmath --disable-libquadmath-support --enable-plugin --enable-default-pie --with-system-zlib --enable-libphobos-checking=release --without-target-system-zlib --enable-multiarch --disable-sjlj-exceptions --with-arch=armv7-a+fp --with-float=hard --with-mode=thumb --disable-werror --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=arm-linux-gnueabihf --program-prefix=arm-linux-gnueabihf- --includedir=/usr/arm-linux-gnueabihf/include --with-build-config=bootstrap-lto-lean --enable-link-serialization=2\n    Thread model: posix\n    Supported LTO compression algorithms: zlib zstd\n    gcc version 11.4.0 (Ubuntu 11.4.0-1ubuntu1~22.04) \n</code></pre>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1-1_%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91Hello%E7%A8%8B%E5%BA%8F/#arm-hello_1","title":"ARM \u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u7f16\u8bd1\u6267\u884c hello","text":"<pre><code>    finchee@linux-server:~/Documents/hello$ arm-linux-gnueabihf-gcc -o hello hello.c\n</code></pre> <p>ARM \u5f00\u53d1\u677f\u6267\u884c ./hello \u78b0\u5230\u5982\u4e0b\u95ee\u9898:</p> <pre><code>    finchee@raspberrypi:~/Documents/hello $ sudo ./hello\n    sudo: ./hello: command not found\n    finchee@raspberrypi:~/Documents/hello $ ./hello\n    -bash: ./hello: Permission denied\n    finchee@raspberrypi:~/Documents/hello $ file hello\n    hello: ELF 32-bit LSB pie executable, ARM, EABI5 version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux-armhf.so.3, BuildID[sha1]=b1771a5aa9c09f0b31345c161ad5ff6fa4909399, for GNU/Linux 3.2.0, not stripped\n</code></pre> <p>\u6839\u636e ARM\u4e0a\u8fd0\u884c\u53ef\u6267\u884c\u7a0b\u5e8f\u51fa\u73b0No such file or directory\u7684\u95ee\u9898 \u4e2d\u7684\u65b9\u6cd5, \u670d\u52a1\u5668\u7f16\u8bd1\u65f6\u589e\u52a0 <code>-static</code> \u53c2\u6570</p> <pre><code>    finchee@linux-server:~/Documents/hello$ arm-linux-gnueabihf-gcc -o hello hello.c -static\n</code></pre> <p>\u62f7\u8d1d\u5230 ARM \u5f00\u53d1\u677f\u6267\u884c\u7ed3\u679c\u5982\u4e0b</p> <pre><code>    finchee@raspberrypi:~/Documents/hello $ ./hello finchee\n    Hello, finchee!\n    finchee@raspberrypi:~/Documents/hello $ file ./hello\n    ./hello: ELF 32-bit LSB executable, ARM, EABI5 version 1 (GNU/Linux), statically linked, BuildID[sha1]=a5b138ce6e9a9bcd4a2014062121e7a1e4a9f505, for GNU/Linux 3.2.0, not stripped\n</code></pre> <p>\u4e24\u6b21\u7f16\u8bd1\u540e\u7684\u533a\u522b\u5982\u4e0b</p> <pre><code>    EABI5 version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux-armhf.so.3, \n    EABI5 version 1 (GNU/Linux), statically linked, \n</code></pre> <p>\u5173\u4e8e\u4f7f\u7528\u9759\u6001\u94fe\u63a5\u7684\u65b9\u5f0f\u8fdb\u884c\u7f16\u8bd1, \u8fd9\u4e00\u90e8\u5206\u5f85\u63a2\u7a76\u8865\u5145.</p>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1-1_%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91Hello%E7%A8%8B%E5%BA%8F/#hello_2","title":"hello \u7a0b\u5e8f\u7684\u5f15\u7533","text":""},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1-1_%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91Hello%E7%A8%8B%E5%BA%8F/#hc","title":".h/.c \u6587\u4ef6\u7684\u5dee\u522b","text":"\u6587\u4ef6 \u529f\u80fd \u4f4d\u7f6e .h \u58f0\u660e\u51fd\u6570/declare(\u4e3e\u4f8b:int add(int a, int b); \u7f16\u8bd1\u5668\u6839\u636e\u58f0\u660e\u68c0\u67e5\u51fd\u6570\u7684\u4f7f\u7528\u662f\u5426\u6b63\u786e) 1. \u7cfb\u7edf\u76ee\u5f55(\u5de5\u5177\u94fe\u7684\u76ee\u5f55)2. \u7528\u6237\u6307\u5b9a\u76ee\u5f55(-I dir) .c \u5b9e\u73b0/define(implement) 1. \u7cfb\u7edf\u76ee\u5f552. \u7528\u6237\u6307\u5b9a\u76ee\u5f55 <p>\u53ef\u4ee5\u6839\u636e\u4ee5\u4e0a\u5f15\u7533\u89e3\u51b3\u4ee5\u4e0b\u95ee\u9898</p> <ol> <li>\u5934\u6587\u4ef6\u627e\u4e0d\u5230</li> <li>\u51fd\u6570\u672a\u5b9a\u4e49</li> </ol>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/1-1_%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91Hello%E7%A8%8B%E5%BA%8F/#_2","title":"\u7cfb\u7edf\u5c42\u6b21","text":"\u7cfb\u7edf\u5c42\u6b21 usr APP usr libc &lt;--printf/open/read kernel FS/Driver &lt;--open/read \u5e95\u5c42\u786c\u4ef6"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-1_GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/","title":"GCC\u7f16\u8bd1\u8fc7\u7a0b","text":""},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-1_GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/#gcc_1","title":"GCC\u7f16\u8bd1\u6d41\u7a0b\u56fe","text":"<pre><code>flowchart LR\n    A(main.c) --&gt;|\u9884\u5904\u7406| B(main.i)\n    B --&gt;|\u7f16\u8bd1| C(main.s)\n    C --&gt;|\u6c47\u7f16| D(main.o)\n    D --&gt;|\u94fe\u63a5| E(LED.elf)\n    E --&gt;|\u53cd\u6c47\u7f16| F(led.dis)\n    G(start.s) --&gt;|\u6c47\u7f16| H(start.o)\n    H --&gt;|\u94fe\u63a5| E\n</code></pre> <p>\u9884\u5904\u7406: 1.\u67e5\u627e\u5934\u6587\u4ef6 2.\u5c55\u5f00\u5b8f</p>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-1_GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/#_1","title":"\u5386\u53f2\u8fc7\u7a0b","text":"<pre><code>flowchart LR\n    subgraph \u5386\u53f2\u53d1\u5c55\n        direction TB\n        A(\u7535\u5de5\u64cd\u4f5c\u5f00\u5173) --&gt;|\u5347\u7ea7| B(\u7eb8\u5e26\u6253\u5b54)\n        B --&gt; C(\u82f1\u6587\u52a9\u8bb0\u7b26)\n        C --&gt; D(\u9ad8\u7ea7\u8bed\u8a00)\n    end\n    subgraph \u7f16\u8bd1\u5173\u7cfb\n        direction TB\n        B &lt;--&gt; E(\u673a\u5668\u7801)\n        C &lt;--&gt; F(\u6c47\u7f16\u7801)\n        D &lt;--&gt; G(.c/.h\u6587\u4ef6)\n        I --&gt;|\u7f16\u8bd1|F\n        F --&gt;|\u6c47\u7f16| E\n        E --&gt;|\u53cd\u6c47\u7f16| F\n        E --&gt;|\u94fe\u63a5| J(APP)\n        H(\u5176\u4ed6\u673a\u5668\u7801) --&gt;|\u94fe\u63a5| J\n        G --&gt;|\u9884\u5904\u7406|I(.i\u6587\u4ef6)\n    end\n</code></pre>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-1_GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/#hello","title":"hello \u7f16\u8bd1\u8fc7\u7a0b\u89e3\u6790","text":""},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-1_GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/#hello_1","title":"hello \u7a0b\u5e8f","text":"<pre><code>#include &lt;stdio.h&gt;\n\n#define MAX 20\n#define MIN 10\n\n//#define   _DEBUG\n#define     SetBit(x)   (1&lt;&lt;x)\n\nint main(int argc, char* argv[])\n{\n    printf(\"hello World! \\n\");\n    printf(\"MAX = %d, MIN = %d, MAX + MIN = %d \\n\", MAX, MIN, MAX + MIN);\n\n#ifdef _DEBUG\n    printf(\"SetBit(5) = %d, SetBit(6) = %d \\n\", SetBit(5), SetBit(6));\n    printf(\"SetBit( SetBit(2) ) = %d \\n\", SetBit( SetBit(2) ));\n#endif\n    return 0;\n}\n</code></pre>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-1_GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/#_2","title":"\u7f16\u8bd1\u8fc7\u7a0b\u53ca\u67e5\u770b\u8fc7\u7a0b","text":"<p>\u7f16\u8bd1\u53ca\u6267\u884c\u7ed3\u679c:</p> <pre><code>finchee@linux-server:~/Documents/\u5d4c\u5165\u5f0flinux\u5e94\u7528\u5f00\u53d1\u57fa\u7840/02_options/01_hello$ gcc -o hello hello.c\nfinchee@linux-server:~/Documents/\u5d4c\u5165\u5f0flinux\u5e94\u7528\u5f00\u53d1\u57fa\u7840/02_options/01_hello$ ./hello\nhello World! \nMAX = 20, MIN = 10, MAX + MIN = 30 \n</code></pre> <p>\u7f16\u8bd1\u9009\u9879\u52a0<code>-v</code>\u67e5\u770b\u8be6\u7ec6\u7f16\u8bd1\u8fc7\u7a0b:</p> <pre><code>finchee@linux-server:~/Documents/\u5d4c\u5165\u5f0flinux\u5e94\u7528\u5f00\u53d1\u57fa\u7840/02_options/01_hello$ gcc -o hello hello.c -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/11/lto-wrapper\nOFFLOAD_TARGET_NAMES=nvptx-none:amdgcn-amdhsa\nOFFLOAD_TARGET_DEFAULT=1\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 11.4.0-1ubuntu1~22.04' --with-bugurl=file:///usr/share/doc/gcc-11/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++,m2 --prefix=/usr --with-gcc-major-version-only --program-suffix=-11 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --enable-bootstrap --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-plugin --enable-default-pie --with-system-zlib --enable-libphobos-checking=release --with-target-system-zlib=auto --enable-objc-gc=auto --enable-multiarch --disable-werror --enable-cet --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none=/build/gcc-11-XeT9lY/gcc-11-11.4.0/debian/tmp-nvptx/usr,amdgcn-amdhsa=/build/gcc-11-XeT9lY/gcc-11-11.4.0/debian/tmp-gcn/usr --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu --with-build-config=bootstrap-lto-lean --enable-link-serialization=2\nThread model: posix\nSupported LTO compression algorithms: zlib zstd\ngcc version 11.4.0 (Ubuntu 11.4.0-1ubuntu1~22.04) \nCOLLECT_GCC_OPTIONS='-o' 'hello' '-v' '-mtune=generic' '-march=x86-64'\n /usr/lib/gcc/x86_64-linux-gnu/11/cc1 -quiet -v -imultiarch x86_64-linux-gnu hello.c -quiet -dumpbase hello.c -dumpbase-ext .c -mtune=generic -march=x86-64 -version -fasynchronous-unwind-tables -fstack-protector-strong -Wformat -Wformat-security -fstack-clash-protection -fcf-protection -o /tmp/ccgd2QMp.s\nGNU C17 (Ubuntu 11.4.0-1ubuntu1~22.04) version 11.4.0 (x86_64-linux-gnu)\n        compiled by GNU C version 11.4.0, GMP version 6.2.1, MPFR version 4.1.0, MPC version 1.2.1, isl version isl-0.24-GMP\n\nGGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072\nignoring nonexistent directory \"/usr/local/include/x86_64-linux-gnu\"\nignoring nonexistent directory \"/usr/lib/gcc/x86_64-linux-gnu/11/include-fixed\"\nignoring nonexistent directory \"/usr/lib/gcc/x86_64-linux-gnu/11/../../../../x86_64-linux-gnu/include\"\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /usr/lib/gcc/x86_64-linux-gnu/11/include\n /usr/local/include\n /usr/include/x86_64-linux-gnu\n /usr/include\nEnd of search list.\nGNU C17 (Ubuntu 11.4.0-1ubuntu1~22.04) version 11.4.0 (x86_64-linux-gnu)\n        compiled by GNU C version 11.4.0, GMP version 6.2.1, MPFR version 4.1.0, MPC version 1.2.1, isl version isl-0.24-GMP\n\nGGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072\nCompiler executable checksum: 50eaa2331df977b8016186198deb2d18\nCOLLECT_GCC_OPTIONS='-o' 'hello' '-v' '-mtune=generic' '-march=x86-64'\n as -v --64 -o /tmp/ccPnzdL0.o /tmp/ccgd2QMp.s\nGNU\u6c47\u7f16\u7248\u672c 2.38 (x86_64-linux-gnu) \u4f7f\u7528BFD\u7248\u672c (GNU Binutils for Ubuntu) 2.38\nCOMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/\nLIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/11/../../../../lib/:/lib/x86_64-linux-gnu/:/lib/../lib/:/usr/lib/x86_64-linux-gnu/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/11/../../../:/lib/:/usr/lib/\nCOLLECT_GCC_OPTIONS='-o' 'hello' '-v' '-mtune=generic' '-march=x86-64' '-dumpdir' 'hello.'\n /usr/lib/gcc/x86_64-linux-gnu/11/collect2 -plugin /usr/lib/gcc/x86_64-linux-gnu/11/liblto_plugin.so -plugin-opt=/usr/lib/gcc/x86_64-linux-gnu/11/lto-wrapper -plugin-opt=-fresolution=/tmp/ccM099Zb.res -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lgcc_s -plugin-opt=-pass-through=-lc -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lgcc_s --build-id --eh-frame-hdr -m elf_x86_64 --hash-style=gnu --as-needed -dynamic-linker /lib64/ld-linux-x86-64.so.2 -pie -z now -z relro -o hello /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/Scrt1.o /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/11/crtbeginS.o -L/usr/lib/gcc/x86_64-linux-gnu/11 -L/usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/11/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/11/../../.. /tmp/ccPnzdL0.o -lgcc --push-state --as-needed -lgcc_s --pop-state -lc -lgcc --push-state --as-needed -lgcc_s --pop-state /usr/lib/gcc/x86_64-linux-gnu/11/crtendS.o /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/crtn.o\nCOLLECT_GCC_OPTIONS='-o' 'hello' '-v' '-mtune=generic' '-march=x86-64' '-dumpdir' 'hello.'\n</code></pre>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-1_GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/#_3","title":"\u8fc7\u7a0b\u89e3\u6790","text":"<p>\u4f7f\u7528 <code>cc1</code> \u547d\u4ee4\u5c06 hello.c \u7f16\u8bd1\u4e3a\u4e34\u65f6\u7684 .s \u6587\u4ef6 :</p> <pre><code> /usr/lib/gcc/x86_64-linux-gnu/11/cc1 hello.c -o /tmp/ccgd2QMp.s\n</code></pre> <p>cc1 \u540c\u65f6\u4f1a\u9884\u5904\u7406\u5934\u6587\u4ef6\u4f4d\u7f6e(\u53ef\u4ee5\u770b\u5230\"...\"\u548c&lt;...&gt;\u641c\u7d22\u8def\u5f84\u4e0d\u540c):</p> <pre><code>#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /usr/lib/gcc/x86_64-linux-gnu/11/include\n /usr/local/include\n /usr/include/x86_64-linux-gnu\n /usr/include\nEnd of search list.\n</code></pre> <p>\u4f7f\u7528 <code>as</code> \u547d\u4ee4\u5c06 .s\u6587\u4ef6 \u6c47\u7f16\u4e3a .o\u6587\u4ef6 :</p> <pre><code> as -v --64 -o /tmp/ccPnzdL0.o /tmp/ccgd2QMp.s\n</code></pre> <p>\u7f16\u8bd1\u8def\u5f84</p> <pre><code>COMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/\n</code></pre> <p>\u5e93\u8def\u5f84</p> <pre><code>LIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/11/:/usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/11/../../../../lib/:/lib/x86_64-linux-gnu/:/lib/../lib/:/usr/lib/x86_64-linux-gnu/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/11/../../../:/lib/:/usr/lib/\n</code></pre> <p>\u4f7f\u7528 <code>collect2</code> \u94fe\u63a5 .o/.so/.a\u6587\u4ef6 \u6210\u4e3a APP:</p> <pre><code>COLLECT_GCC_OPTIONS='-o' 'hello' '-v' '-mtune=generic' '-march=x86-64' '-dumpdir' 'hello.'\n /usr/lib/gcc/x86_64-linux-gnu/11/collect2 -plugin /usr/lib/gcc/x86_64-linux-gnu/11/liblto_plugin.so -plugin-opt=/usr/lib/gcc/x86_64-linux-gnu/11/lto-wrapper -plugin-opt=-fresolution=/tmp/ccM099Zb.res -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lgcc_s -plugin-opt=-pass-through=-lc -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lgcc_s --build-id --eh-frame-hdr -m elf_x86_64 --hash-style=gnu --as-needed -dynamic-linker /lib64/ld-linux-x86-64.so.2 -pie -z now -z relro -o hello /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/Scrt1.o /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/11/crtbeginS.o -L/usr/lib/gcc/x86_64-linux-gnu/11 -L/usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/11/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/11/../../.. /tmp/ccPnzdL0.o -lgcc --push-state --as-needed -lgcc_s --pop-state -lc -lgcc --push-state --as-needed -lgcc_s --pop-state /usr/lib/gcc/x86_64-linux-gnu/11/crtendS.o /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/crtn.o\nCOLLECT_GCC_OPTIONS='-o' 'hello' '-v' '-mtune=generic' '-march=x86-64' '-dumpdir' 'hello.'\n</code></pre>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-1_GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/#_4","title":"\u5206\u6b65\u6267\u884c","text":"<p>\u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u5206\u5e03\u6267\u884c\u7f16\u8bd1\u8fc7\u7a0b:</p> \u9009\u9879 \u63cf\u8ff0 -E \u9884\u5904\u7406, \u5f00\u53d1\u8fc7\u7a0b\u4e2d\u60f3\u5feb\u901f\u786e\u5b9a\u5b8f\u53ef\u4ee5\u4f7f\u7528<code>-E</code>\u6216<code>-dM</code> -c \u9884\u5904\u7406\u3001\u7f16\u8bd1\u3001\u6c47\u7f16, \u4f46\u4e0d\u94fe\u63a5 -o \u6307\u5b9a\u8f93\u51fa\u6587\u4ef6"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-2_GCC%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9/","title":"GCC\u5e38\u7528\u9009\u9879","text":""},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-2_GCC%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9/#_1","title":"\u591a\u6587\u4ef6\u7f16\u8bd1","text":""},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-2_GCC%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9/#_2","title":"\u5e38\u7528\u7f16\u8bd1\u9009\u9879","text":"\u9009\u9879 \u63cf\u8ff0 -E \u9884\u5904\u7406, \u5f00\u53d1\u8fc7\u7a0b\u4e2d\u60f3\u5feb\u901f\u786e\u5b9a\u5b8f\u53ef\u4ee5\u4f7f\u7528<code>-E</code>\u6216<code>-dM</code> -c \u9884\u5904\u7406\u3001\u7f16\u8bd1\u3001\u6c47\u7f16, \u4f46\u4e0d\u94fe\u63a5 -o \u6307\u5b9a\u8f93\u51fa\u6587\u4ef6 -I \u6307\u5b9a\u5934\u6587\u4ef6\u76ee\u5f55 -L \u6307\u5b9a\u94fe\u63a5\u65f6\u7684\u5e93\u6587\u4ef6\u76ee\u5f55 -l \u6307\u5b9a\u94fe\u63a5\u7684\u5e93\u6587\u4ef6"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-2_GCC%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9/#_3","title":"\u6e90\u7a0b\u5e8f\u5185\u5bb9","text":"<p>main.c:</p> <pre><code>#include &lt;stdio.h&gt;\n#include \"sub.h\"\n\nint main(int argc, char *argv[])\n{\n    int i\n    printf(\"main fun! \\n\");\n    sub_fun();\n    return 0;\n}\n</code></pre> <p>sub.h:</p> <pre><code>void sub_fun(void);\n</code></pre> <p>sub.c:</p> <pre><code>void sub_fun(void)\n{\n    printf(\"sub fun! \\n\");\n}\n</code></pre>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-2_GCC%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9/#_4","title":"\u7f16\u8bd1\u53ca\u6267\u884c\u7ed3\u679c","text":"<pre><code>finchee@linux-server:~/Documents/\u5d4c\u5165\u5f0flinux\u5e94\u7528\u5f00\u53d1\u57fa\u7840/02_options/02_multi_file$ gcc -o test main.c sub.c\nsub.c: In function \u2018sub_fun\u2019:\nsub.c:3:5: warning: implicit declaration of function \u2018printf\u2019 [-Wimplicit-function-declaration]\n    3 |     printf(\"sub fun! \\n\");\n      |     ^~~~~~\nsub.c:1:1: note: include \u2018&lt;stdio.h&gt;\u2019 or provide a declaration of \u2018printf\u2019\n  +++ |+#include &lt;stdio.h&gt;\n    1 | void sub_fun(void)\nsub.c:3:5: warning: incompatible implicit declaration of built-in function \u2018printf\u2019 [-Wbuiltin-declaration-mismatch]\n    3 |     printf(\"sub fun! \\n\");\n      |     ^~~~~~\nsub.c:3:5: note: include \u2018&lt;stdio.h&gt;\u2019 or provide a declaration of \u2018printf\u2019\nfinchee@linux-server:~/Documents/\u5d4c\u5165\u5f0flinux\u5e94\u7528\u5f00\u53d1\u57fa\u7840/02_options/02_multi_file$ ./test\nmain fun! \nsub fun! \n</code></pre> <p>GCC \u7684\u5904\u7406\u6d41\u7a0b:</p> <pre><code>flowchart LR\n  A(main.c) --&gt;|\u9884\u5904\u7406| B(main.i)\n  B --&gt;|\u7f16\u8bd1| C(main.s)\n  C --&gt;|\u6c47\u7f16| D(main.o)\n  D --&gt;|\u94fe\u63a5| I(test)\n  E(sub.c) --&gt;|\u9884\u5904\u7406| F(sub.i)\n  F --&gt;|\u7f16\u8bd1| G(sub.s)\n  G --&gt;|\u6c47\u7f16| H(sub.o)\n  H --&gt;|\u94fe\u63a5| I\n</code></pre> <p>\u53ef\u4ee5\u4f7f\u7528 <code>-v</code> \u9009\u9879\u67e5\u770b\u8be6\u7ec6\u7f16\u8bd1\u8fc7\u7a0b, \u6b64\u5904\u4ec5\u5c55\u793a\u5173\u7cfb\u5e76\u8bf4\u660e\u8981\u70b9:</p> <pre><code>flowchart LR\nA(main.c) --&gt;|cc1| B(/tmp/ccA0k7FA.s)\nB --&gt;|as| C(/tmp/ccpIg1pK.o)\nC --&gt;|collect2| I(test)\nE(sub.c) --&gt;|cc1| F(/tmp/ccA0k7FA.s)\nF --&gt;|as| G(/tmp/cckyAyfU.o)\nG --&gt;|collect2| I\nD(\"\u5404\u79cd\u5e93(liblto.so...)\u548c\u7cfb\u7edf\u63d0\u4f9b\u7684\u542f\u52a8\u6587\u4ef6(Scrt1.o/crti.o...)\") --&gt;|collect2| I\n</code></pre> <ol> <li><code>cc1</code> \u5c06 main.c \u548c sub.c \u8f6c\u6362\u6210\u7684\u4e34\u65f6\u6587\u4ef6(/tmp/ccA0k7FA.s)\u53ef\u4ee5\u540c\u540d</li> <li>\u9700\u8981\u7f16\u8bd1\u7684\u6e90\u6587\u4ef6\u8fc7\u591a\u65f6, <code>-o</code> \u9009\u9879\u4e0d\u9002\u5408\u4fee\u6539\u5355\u4e2a\u6587\u4ef6\u540e\u518d\u7f16\u8bd1\u4f7f\u7528, \u53ea\u9700\u8981\u4f7f\u7528 <code>-c</code> \u9009\u9879\u5148\u7f16\u8bd1, \u518d\u4f7f\u7528 <code>-o</code> \u9009\u9879\u94fe\u63a5\u6240\u6709\u6587\u4ef6\u5373\u53ef.</li> <li>\u9884\u5904\u7406\u8fc7\u7a0b\u4e2d<ul> <li>\u4f7f\u7528 <code>\"...\"</code> \u5f15\u7528\u7684\u5934\u6587\u4ef6\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u67e5\u627e</li> <li>\u4f7f\u7528 <code>&lt;...&gt;</code> \u5f15\u7528\u7684\u5934\u6587\u4ef6\u4f1a\u5728\u7cfb\u7edf\u6216\u7f16\u8bd1\u5de5\u5177\u94fe\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u67e5\u627e</li> <li>\u627e\u4e0d\u5230\u5934\u6587\u4ef6\u65f6, \u901a\u8fc7 <code>-I</code> \u9009\u9879\u4e3a\u5934\u6587\u4ef6\u589e\u52a0\u6307\u5b9a\u641c\u7d22\u7684\u76ee\u5f55, \u6216\u8fd9\u628a\u5934\u6587\u4ef6\u653e\u5165\u7cfb\u7edf/\u5de5\u5177\u94fe\u6307\u5b9a\u7684\u76ee\u5f55\u4e2d</li> </ul> </li> </ol>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-2_GCC%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9/#_5","title":"\u5236\u4f5c\u3001\u4f7f\u7528\u52a8\u6001\u6216\u9759\u6001\u5e93","text":"<p>sub.c \u53ef\u4ee5\u4f5c\u4e3a\u9759\u6001\u5e93\u6216\u52a8\u6001\u5e93\u4f7f\u7528</p> <pre><code>flowchart LR\n   subgraph \u9759\u6001\u5e93\n    direction LR\n     A(sub.c) --&gt;|gcc -c -o| B(sub.o)\n     C(sub1.c) --&gt;|gcc -c -o| D(sub1.o)\n     B --&gt;|ar crs| E(libsub.a)\n     D --&gt;|ar crs| E(libsub.a)\n     sub2.o... --&gt;|ar crs| E(libsub.a)\n     E --&gt;|gcc -o| test\n     F(main.c) --&gt;|gcc -c -o| G(main.o)\n     G --&gt;|gcc -o| test\n   end\n</code></pre> <pre><code>flowchart LR\n   subgraph \u52a8\u6001\u5e93\n    direction LR\n     A(sub.c) --&gt;|gcc -c -o| B(sub.o)\n     C(sub1.c) --&gt;|gcc -c -o| D(sub1.o)\n     B --&gt;|gcc -shared -o| E(libsub.a)\n     D --&gt;|gcc -shared -o| E(libsub.a)\n     sub2.o... --&gt;|gcc -shared -o| E(libsub.a)\n     E --&gt;|gcc -o| test2\n     F(main.c) --&gt;|gcc -c -o| G(main.o)\n     G --&gt;|gcc -o| test2\n   end\n</code></pre> <pre><code>flowchart LR\n   subgraph \u4f7f\u7528 -l -L \u94fe\u63a5\u5e93\u6587\u4ef6\n    direction LR\n     A(sub.c) --&gt;|gcc -c -o| B(sub.o)\n     C(sub1.c) --&gt;|gcc -c -o| D(sub1.o)\n     B --&gt;|gcc -shared -o| E(libsub.so)\n     D --&gt;|gcc -shared -o| E(libsub.so)\n     sub2.o... --&gt;|gcc -shared -o| E(libsub.so)\n     E --&gt;|gcc -o -lsub -L ./libsub.so\u6240\u5728\u76ee\u5f55 -lsub| test2\n     F(main.c) --&gt;|gcc -c -o| G(main.o)\n     G --&gt;|gcc -o -lsub -L ./libsub.so\u6240\u5728\u76ee\u5f55 -lsub| test2\n   end\n</code></pre> <ol> <li>\u9759\u6001\u5e93\u94fe\u63a5\u65f6\u4f1a\u548c main.o \u6253\u5305\u5728\u4e00\u8d77\u751f\u6210 test, \u4f53\u79ef\u6bd4\u52a8\u6001\u5e93\u94fe\u63a5\u751f\u6210\u7684 test2 \u5927</li> <li>\u4f7f\u7528 <code>-l+\u5e93\u540d</code> \u9009\u9879\u94fe\u63a5\u5e93\u65f6, \u5982\u679c\u627e\u4e0d\u5230\u6587\u4ef6, \u9700\u8981\u4f7f\u7528 <code>-L</code> \u9009\u9879\u5c06 libsub.so \u6240\u5728\u76ee\u5f55\u6dfb\u52a0\u5230 <code>LIBRARY_PATH</code> \u4e2d</li> <li>\u4f7f\u7528 <code>file</code> \u547d\u4ee4\u67e5\u770b\u4e24\u79cd\u94fe\u63a5\u65b9\u5f0f\u4ea7\u751f\u7684 test \u6587\u4ef6, \u90fd\u4e3a\u52a8\u6001\u94fe\u63a5(dynamically link), \u662f\u56e0\u4e3a\u9759\u6001\u94fe\u63a5\u65b9\u5f0f\u9664\u4e86\u9759\u6001\u94fe\u63a5\u5230 libsub.a , \u8fd8\u4f1a\u52a8\u6001\u94fe\u63a5\u5176\u4ed6\u5e93</li> <li>\u6267\u884c <code>./test2</code> \u65f6\u4f1a\u63d0\u793a\u627e\u4e0d\u5230\u52a8\u6001\u5e93, \u94fe\u63a5\u548c\u6267\u884c\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u6982\u5ff5, \u9700\u8981\u4e3a\u6267\u884c\u6307\u5b9a\u5e93\u7684\u8def\u5f84:<ol> <li>\u5c06\u52a8\u6001\u5e93\u653e\u5165\u7cfb\u7edf\u6307\u5b9a\u7684\u8def\u5f84(/lib /usr/lib ...)</li> <li>\u7528\u6237\u6307\u5b9a\u7684\u8def\u5f84     1. \u8ba9 LD_LIBRARY_PATH \u7b49\u4e8e\u539f\u6765\u7684\u503c\u52a0\u4e0a\u65b0\u7684\u503c       &gt; export LD_LIBRARY_PATH = $LD_LIBRARY_PATH:./</li> </ol> </li> </ol>"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/2-2_GCC%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9/#_6","title":"\u603b\u7ed3","text":"\u6587\u4ef6 \u5907\u6ce8 \u67e5\u627e\u4f4d\u7f6e \u5934\u6587\u4ef6 &lt;...&gt;\"...\" 1.\u7cfb\u7edf\u6307\u5b9a\u7684\u5934\u6587\u4ef6\u76ee\u5f552.<code>-I</code>\u6307\u5b9adir \u5e93\u6587\u4ef6 -lxxx 1.\u7cfb\u7edf\u6307\u5b9a\u7684lib\u76ee\u5f552.<code>-L</code>\u6307\u5b9adir \u6267\u884c .so 1.\u7cfb\u7edf\u6307\u5b9a\u7684\u8def\u5f84(/lib /usr/lib ...)2.\u4f7f\u7528\u73af\u5883\u53d8\u91cf<code>LD_LIBRARY_PATH</code>\u6307\u5b9a"},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/tspi_linux/%E7%BC%96%E8%AF%91%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/","title":"\u7f16\u8bd1\u95ee\u9898\u8bb0\u5f55","text":""},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/tspi_linux/%E7%BC%96%E8%AF%91%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/#2024-05-15","title":"2024-05-15","text":""},{"location":"notes/%E5%B5%8C%E5%85%A5%E5%BC%8F_linux_%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/tspi_linux/%E7%BC%96%E8%AF%91%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/#_2","title":"\u7f3a\u5931\u5e93\u6587\u4ef6","text":"<p>shell \u63d0\u793a\u4fe1\u606f:</p> <p>FAILED: out/target/product/rk3566_tspi/obj/RENDERSCRIPT_BITCODE/libclcore.bc_intermediates/rs_f16_math.bc</p> <p>/bin/bash -c \"PWD=/proc/self/cwd prebuilts/clang/host/linux-x86/clang-3289846/bin/clang -Iframeworks/rs/script_api/include -Iexternal/clang/lib/Headers -MD -DRS_VERSION=24 -std=c99 -c -O3 -fno-builtin -emit-llvm -target renderscript64-linux-android -fsigned-char -Wno-deprecated -Werror -Werror -Wall -Wextra -Iframeworks/rs/cpu_ref -DRS_DECLARE_EXPIRED_APIS -DARCH_ARM64_HAVE_NEON -x renderscript frameworks/rs/driver/runtime/rs_f16_math.c -o out/target/product/rk3566_tspi/obj/RENDERSCRIPT_BITCODE/libclcore.bc_intermediates/rs_f16_math.bc\"prebuilts/clang/host/linux-x86/clang-3289846/bin/clang.real: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory17:17:44 ninja failed with: exit status 1</p> <p>\u89e3\u51b3\u65b9\u6cd5:\u6839\u636e\u63d0\u793a\u4fe1\u606f\u4e2d<code>error while loading shared libraries: libncurses.so.5</code>, Kimi.ai \u56de\u590d:</p> <p>\u5b89\u88c5\u7f3a\u5931\u7684\u5e93\uff1a\u5982\u679c\u7cfb\u7edf\u4e2d\u6ca1\u6709\u5b89\u88c5 libncurses\uff0c\u53ef\u4ee5\u901a\u8fc7\u5305\u7ba1\u7406\u5668\u5b89\u88c5\u5b83\u3002\u5bf9\u4e8e\u57fa\u4e8e Debian \u7684\u7cfb\u7edf\uff08\u5982 Ubuntu\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\uff1a</p> <p>sudo apt-get install libncurses5</p>"}]}